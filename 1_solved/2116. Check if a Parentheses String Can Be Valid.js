/**
 * @param {string} s
 * @param {string} locked
 * @return {boolean}
 */
var canBeValid = function (s, locked, n = s.length) {
    if (n == 1 || n % 2 !== 0) return false;
    if ((s[0] == ")" && locked[0] == "1") || (s[n - 1] == "(" && locked[n - 1] == "1")) return false;
    if (!locked.includes("1")) return true;

    for (let i = 0, debt = 0; i < n; i++) {
        s[i] == ")" && locked[i] == "1" ? debt++ : debt--;
        if (debt > 0) return false;
    }
    for (let i = n - 1, debt = 0; i >= 0; i--) {
        s[i] == "(" && locked[i] == "1" ? debt++ : debt--;
        if (debt > 0) return false;
    }

    return true;
};

console.log(
    canBeValid(
        (s =
            "()))((())()))(())()()()()())))()((((())(((()())))))))(((()()))(()((()()())())))()(())()))())(((()))(()(((()))(()()(()((()(()())))()))()((()((((()(()((()))))))(((()(()(()((()(())()())()())()(())((()(())))((()))(()))()()()))))))(()(((())())((()(((()()((()()))(()())())((((())))())()())()()(()()()())())()()))))))))()())())()))(((((()()()))))(((()()(()(()))))()()()())()(()(((()()(())(((())))(((()())((()))()))(((()(((()))()()))()))())(()((((())()(((()(()(()()((((())()))((())())((()((((())))()(()()())))))()())()))))())())()))())((((((()())())())((())(()())))((((())"),
        (locked =
            "101011100110100010011001000000000101010011010101110000010101100100100101010000111111000101100001001100011111011011100001001011000110110111110010110010001111001111010001111000010110001011011110010001010011011010000011100111110010110110010011011100110011101001010111110110101110110001100010101101111111100100011010011101100000111011101011111010101000000100100010001101111111000111100111111001100010111001100110010011111101111100001110011110111011000111101000110101110010111010111001110001000111100100101100001100100111100110110100111101101111100000011011011001010011")
    )
);
